# Task Checklist - Story 046 Script and Hook System

- [x] Schema Updates
    - [x] Add `failPolicy` and `executionMode` to `ScriptSchema`
    - [x] Add `BEFORE_TOOL_CALL` and `AFTER_TOOL_CALL` to `hookType` enum
    - [x] Add new event types to `event-bus.js`
- [x] Orchestrator Integration
    - [x] Implement script registration in `initialize()`
    - [x] Implement `executeHook()` method
    - [x] Emit `BEFORE_TOOL_CALL` and `AFTER_TOOL_CALL` in `processRole()`
    - [x] Handle `executionMode` (SYNC/ASYNC)
- [x] Unit Tests
    - [x] Test script registration
    - [x] Test `executeHook()` with context passing
    - [x] Test environment mutation and merge
    - [x] Test `ABORT_EXPERIMENT` policy
    - [x] Test `CONTINUE_WITH_ERROR` policy
- [x] Integration Tests
    - [x] `EXPERIMENT_START` hook
    - [x] `STEP_START` hook
    - [x] `STEP_END` hook
    - [x] `EXPERIMENT_END` hook
    - [x] `BEFORE_TOOL_CALL` hook
    - [x] `AFTER_TOOL_CALL` hook
- [x] Update backlog and story file
